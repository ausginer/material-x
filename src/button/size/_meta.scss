@use 'sass:map';
@use '../../core/tokens/md-comp-button' as default-tokens;
@use '../../core/tokens/md-comp-button-xlarge' as xlarge-tokens;
@use '../../core/tokens/md-comp-button-large' as large-tokens;
@use '../../core/tokens/md-comp-button-medium' as medium-tokens;
@use '../../core/tokens/md-comp-button-small' as small-tokens;
@use '../../core/tokens/md-comp-button-xsmall' as xsmall-tokens;
@use '../../core/utils/functions' as *;
@use '../vars' as *;
@use '../utils' as *;

@function prepare-sizes($sizes) {
  $result: ();

  @each $size, $tokens in $sizes {
    $prepared: prepare-tokens(pick-unique($tokens, default-tokens.$values));

    $size-tokens: ();

    @each $state, $state-tokens in $prepared {
      $size-tokens: map.set(
        $size-tokens,
        $state,
        collect-vars(
          $state-tokens,
          $public-vars,
          $private-vars,
          'md-button-#{state}'
        )
      );
    }

    $result: map.set($result, $size, $size-tokens);
  }

  @return $result;
}

$sizes: prepare-sizes(
  (
    'xlarge': xlarge-tokens.$values,
    'large': large-tokens.$values,
    'medium': medium-tokens.$values,
    'small': small-tokens.$values,
    'xsmall': xsmall-tokens.$values,
  )
);
